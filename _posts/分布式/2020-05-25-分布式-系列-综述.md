---
layout: post
title: "分布式 系列 综述"
author: "lichao"
header-img: "img/netty/host.png"
catalog: true
tags:
  - distributed
---

> 分布式系统是一个硬件或软件组件分布在不同的网络计算机上，彼此之间仅仅通过消息传递进行通信和协调的系统。

## 特点
* 分布性：分布式系统中的多台计算机都会在空间上随意分配，同时，机器的分布情况也会随时变动。
* 对等性：分布式系统中的计算机没有主从之分，既没有控制整个系统的主机，也没有被控制的从机，组成分布式系统的所有计算机节点都是对等的。
* 并发性：
* 缺乏全局时钟
* 故障总是会发生： 任何在设计阶段考虑到的异常情况，一定会在系统实际运行中发生，并且，在系统实际运行过程中还会遇到很多在设计时未能考虑到的异常故障。

## 分布式环境的各种问题
* 通信异常
* 网络分区
* 三体
* 节点故障

## 挑战

#### 分布式事务
分布式事务是指事务的参与者、支持事务的服务器、资源服务器以及事务管理器分别位于分布式系统的不同节点上。通常一个分布式事务中会涉及对多个数据源或业务系统的操作。

> ACID: 事务是由一系列对系统中数据进行访问与更新的操作所组成的一个程序执行逻辑单元。事务具有四个特征：原子性、一致性、隔离型和持久性。

#### CAP
CAP 理论表明一个分布式系统不可能同时满足一致性、可用性和分区容错性这三项基本需求，最多只能同时满足其中的两项。

#### BASE 理论
BASE 是指 BasicallyAvailable 基本可用、SoftState 软状态 和 EventuallyConsistent 最终一致性。 其核心思想是即使无法做到强一致性，但每个应用都可以根据自身的业务特点，采用适当的方式来使系统达到最终一致性。

> BASE 是对 CAP 中一致性和可用性权衡的结果，其来源于对大规模互联网系统分布式实践的总结
###### 基本可用
基本可用是指分布式系统在出现不可预知故障的时候，允许损失部分可用性。
* 响应时间上的损失
* 功能上的损失: 服务降级
###### 弱状态
弱状态也称软状态，指允许系统中的数据存在中间状态，并认为该中间状态的存在不会影响系统的整体可用性，即允许系统在不同节点的数据副本之间进行数据同步的过程存在延时。
###### 最终一致性
最终一致性是指系统中所有的数据副本，再经过一段时间的同步后，最终能够达到一个一致的状态。

在实际工程实践中，最终一致性存在以下五类主要变种：
* 因果一致性：因果一致性是指，如果进程 A 在更新完某个数据项后通知了进程B，那么进程B之后对该数据项的访问都应该能够获取到进程A更新后的最新值，并且如果进程B要对该数据项进行更新操作的话，务必基于进程 A 更新后的最新值，即不能发生丢失更新情况。
* 读已之所写：进程A更新一个数据项之后，它自己能够访问到更新过的最新值，而不会看到旧值。
* 会话一致性：系统能保证在同一个有效的会话中实现“读已之所写”的一致性。
* 单调读一致性：如果一个进程从系统中读取出一个数据项的某个值后，那么系统对于该进程后续的任何数据访问都不应该返回更旧的值。



