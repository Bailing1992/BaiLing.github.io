---
layout: post
title: "MySQL 系列 日志文件"
subtitle: 'MySQL 技术内幕：InnoDB存储引擎'
author: "lichao"
header-img: "img/post-bg-2015.jpg"
catalog: true
tags:
  - MySQL
---

## 日志
* 错误日志：记录出错信息，也记录一些警告信息或者正确的信息。
* 查询日志：记录所有对数据库请求的信息，不论这些请求是否得到了正确的执行。
* 慢查询日志：设置一个阈值，将运行时间超过该值的所有 SQL 语句都记录到慢查询的日志文件中。
* 二进制日志：记录对数据库执行更改的所有操作。
* 中继日志：中继日志也是二进制日志，用来给 slave 库恢复
* 事务日志：重做日志 redo 和 回滚日志 undo

#### 错误日志
错误日志文件对MySQL的启动、运行、关闭过程进行了记录。

#### 查询日志
查询日志记录了所有对MySQL数据库请求的信息，无论这些请求是否得到了正确的执行
#### 慢查询日志
慢查询日志可以帮助DBA定位可能存在问题的SQL语句。

#### 二进制日志
二进制日志记录了对 MySQL 数据库执行更改的所有操作，但是不包括SELECT和SHOW这些操作，因为这类操作对数据本身并没有修改。

> 默认情况下，二进制日志并不是在每次写的时候同步到磁盘。因此，当数据库所在地操作系统发生宕机时，可能会有最后一部分数据没有写入二进制日志文件中，这会给恢复和复制带来问题。

> 当使用事务的表储存引擎时，所有未提交的二进制日志会被记录到一个缓存中，等该事务提交时直接将缓冲中的二进制日志写入二进制日志文件。
##### 作用
* 恢复：某些数据的恢复需要二进制日志，例如，在一个数据库全备文件恢复后，用户可通过二进制日志进行point-in-time的恢复。
* 复制：通过复制和执行二进制日志使一台远程的 Mysql 数据库（一般称为slave）与一台MySQL数据库（一般称为master）进行实时同步。
* 审计：用户可以通过二进制日志中的信息来进行审计，判断是否对数据库进行了注入的攻击。