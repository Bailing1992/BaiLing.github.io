---
layout: post
title: "redis 系列 分布式锁"
subtitle: '开启 redis 探索新篇章'
author: "lichao"
header-img: "img/post-bg-rwd.jpg"
catalog: true
tags:
  - redis 
---

> 锁要解决的就是资源竞争的问题，也就是要把执行的指令顺序化

## 分布式锁
分布式锁，是指在分布式的部署环境下，通过锁机制来让多客户端互斥的对共享资源进行访问。分布式锁的特点如下：
#### 分布式锁的特点
* 互斥性：和我们本地锁一样互斥性是最基本，但是分布式锁需要保证在不同节点的不同线程的互斥。
* 可重入性：同一个节点上的同一个线程如果获取了锁之后那么也可以再次获取这个锁。
* 锁超时：和本地锁一样支持锁超时，防止死锁。
* 高效，高可用：加锁和解锁需要高效，同时也需要保证高可用防止分布式锁失效，可以增加降级。
* 支持阻塞和非阻塞：和 ReentrantLock 一样支持 lock 和 trylock 以及 tryLock(long timeOut)

#### 操作分布式锁

#### 拿到锁之后，执行设置超时指令之前down掉怎么办？
redis 2.8 版本之后出现了新的命令:
```
SETEX key seconds value
```

#### 超时问题怎么处理？
