---
layout: post
title: "Graph 概述"
subtitle: ''
author: "lichao"
header-img: "img/post/bg/post-bg-rwd.jpg"
catalog: true
tags:
  - nosql 
---


图数据库是NoSQL（非关系型）数据库的一种实现，以实体及其关系为主要存储对象的数据库系统。

## 基本概念

- 图（Graph）：指关系图
- 顶点（Vertex）：一般指实体。比如：用户、文章、视频等。
- 边（Edge）：一般指顶点之间的关系。比如：用户C关注了用户A、用户A发表了文章3等。
- 属性（Property）：顶点或边都可以拥有对应的属性。
  - 顶点属性：用户是否是大V，文章的发表时间等。
  - 边属性：用户给某文章的点赞时间/发表时间等。

- N跳查询：沿着指定路径查询N次
  - 查询用户A的关注用户是一跳查询；查询用户A的关注用户的关注用户，即为两跳查询
- 入边和出边：箭头起为出边，止为入边。

## 为什么需要使用图数据库

![framework](/img/post/store/graph/graph_intro.png){:height="80%" width="80%"}

**适合处理数据关系，更加直观和容易理解，不用设计复杂的关系表，各种连表join等操作：**

- 针对上图例子，如果设计关系型数据库，需要有用户信息表、球类信息表、骑车信息表、用户和球类的关系表，用户和汽车的关系表....
- 当需要实现“年龄小于18的用户 关注的用户喜欢的球类”这样的一个查询需求，需要关联用户信息表、用户关注关系表、用户和球类的关系表、球类信息表等，无论是写SQL和查询效率来看，都不如图数据库的直观和高效。

**处理数据关系方面具有高性能：**

- 可存储的数据量大
  - 图应用相关的领域数据一般都比较大，比如知识图谱、社交关系，总数据量级别一般在亿或十亿以上。Mysql在不做分表分库的情况下，**插入百万级别数据已经较慢**，图数据库比如neo4j、bytegraph等图数据库，**在十亿/千亿的数据量级还能保持较高的性能**。
- 效率高
  - 关系型数据库在数据规模庞大时很难做多层关联关系分析（Join操作往往消耗过长时间而失败），图数据库则天然把关联数据连接在一起，无需耗时耗内存的Join操作，可以保持常数级时间复杂度。
![framework](/img/post/store/graph/多跳查询.png){:height="80%" width="80%"}

**灵活的数据模型可以适应不断变化的业务需求：**

- 可以不断增加/删除 顶点/边 类型，扩大/缩小数据模型
