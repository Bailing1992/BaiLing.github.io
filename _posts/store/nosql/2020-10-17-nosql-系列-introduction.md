---
layout: post
title: "NoSQL 概述"
subtitle: '分析 高可用的分布式 KV 存储'
author: "lichao"
header-img: "img/post-bg-rwd.jpg"
catalog: true
tags:
  - nosql 
---

> NoSql 可以理解为 一个通用的分布式键值存储系统。

## 特性

作为一个分布式 KV 存储系统，理想目标是达到以下几点：
* 高性能
* 高可用
* 强一致
* 易扩展
* 强容灾
* 数据持久化
* 安全

一个系统如果想达到强一致可能就要牺牲一部分的性能，所以上面的目标要根据系统实际的使用场景作出权衡和取舍。

## 一致性
* 强一致性
* 最终一致性

实现强一致性（数据只要写到主节点，内部会通过状态机将数据复制到其他节点）：     
采用 Paxos 或者 Raft 协议来保证数据的强一致。

实现最终一致性：     
一般是通过数据复制实现最终一致性，数据的复制支持同步复制、异步复制和半同步复制。业务可以根据自己的业务特点选择合适的复制方式。其中半同步复制时，会保证备机写入成功才会返回客户端成功，这样保证不会有数据丢失。

## 可用性与一致性
由 CAP 原理可知，任何分布式系统都需要在一致性和可用性之间取舍，这就出现了两类存储系统：
1. 高可用，最终一致的存储系统
    * Redis
2. 强一致的系统
    * 提供数据强一致性能够大大减小业务的负担




