---
layout: post
title: "Zookeeper 系列 概述"
subtitle: '开启 Zookeeper 探索新篇章'
author: "lichao"
header-img: "img/post-bg-rwd.jpg"
catalog: true
tags:
  - zookeeper 
---


关于 ZooKeeper 这 样 的 系 统 功 能 的 讨 论 都 围 绕 着 一 条 主 线： 它 可 以 在 分 布 式 系 统 中 协 作 多 个 任 务。 一 个 协 作 任 务 是 指 一 个 包 含 多 个 进 程 的 任 务。 这 个 任 务 可 以 是 为 了 协 作 或 者 是 为 了 管 理 竞 争。 协 作 意 味 着 多 个 进 程 需 要 一 同 处 理 某 些 事 情， 一 些 进 程 采 取 某 些 行 动 使 得 其 他 进 程 可 以 继 续 工 作。 比 如， 在 典 型 的 主-从（ master-worker） 工 作 模 式 中， 从 节 点 处 于 空 闲 状 态 时 会 通 知 主 节 点 可 以 接 受 工 作， 于 是 主 节 点 就 会 分 配 任 务 给 从 节 点。 竞 争 则 不 同。 它 指 的 是 两 个 进 程 不 能 同 时 处 理 工 作 的 情 况， 一 个 进 程 必 须 等 待 另 一 个 进 程。 同 样 在 主-从 工 作 模 式 的 例 子 中， 我 们 想 有 一 个 主 节 点， 但 是 很 多 进 程 也 许 都 想 成 为 主 节 点， 因 此 我 们 需 要 实 现 互 斥 排 他 锁（ mutual exclusion）。 实 际 上， 我 们 可 以 认 为 获 取 主 节 点 身 份 的 过 程 其 实 就 是 获 取 锁 的 过 程， 获 得 主 节 点 控 制 权 锁 的 进 程 即 主 节 点 进 程。

在 一 台 计 算 机 上 运 行 的 多 个 进 程 和 跨 计 算 机 运 行 的 多 个 进 程 从 概 念 上 区 别 并 不 大。 在 多 线 程 情 况 下 有 用 的 同 步 原 语 在 分 布 式 系 统 中 也 同 样 有 效。 一 个 重 要 的 区 别 在 于， 在 典 型 的 不 共 享 环 境 下 不 同 的 计 算 机 之 间 不 共 享 除 了 网 络 之 外 的 其 他 任 何 信 息。 虽 然 许 多 消 息 传 递 算 法 可 以 实 现 同 步 原 语， 但 是 使 用 一 个 提 供 某 种 有 序 共 享 存 储 的 组 件 往 往 更 加 简 便， 这 正 是 ZooKeeper 所 采 用 的 方 式。

协 同 并 不 总 是 采 取 像 群 首 选 举 或 者 加 锁 等 同 步 原 语 的 形 式。 配 置 元 数 据 也 是 一 个 进 程 通 知 其 他 进 程 需 要 做 什 么 的 一 种 常 用 方 式。 比 如， 在 一 个 主-从 系 统 中， 从 节 点 需 要 知 道 任 务 已 经 分 配 到 它 们。 即 使 在 主 节 点 发 生 崩 溃 的 情 况 下， 这 些 信 息 也 需 要 有 效。
