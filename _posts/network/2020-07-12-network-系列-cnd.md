---
layout: post
title: "网络 系列 CDN"
subtitle: '开启 网络 探索新篇章'
author: "lichao"
header-img: "img/post-bg-rwd.jpg"
catalog: true
tags:
  - network 
---

> CDN 全称: Content Delivery Network 或 Content Ddistribute Network，即内容分发网络

## 作用
#### 静态资源


#### 动态资源
这部分请求固然是会回源的，可以通过 CDN 的加速来起到快速回源的效果的。

## 目标
解决因分布、带宽、服务器性能带来的访问延迟问题，适用于站点加速、点播、直播等场景。使用户可就近取得所需内容，解决 Internet 网络拥挤的状况，提高用户访问网站的响应速度和成功率。

控制时延无疑是现代信息科技的重要指标，CDN 的意图就是尽可能的减少资源在转发、传输、链路抖动等情况下顺利保障信息的连贯性。

## 基本思路
尽可能避开互联网上有可能影响数据传输速度和稳定性的瓶颈和环节，使内容传输的更快、更稳定。通过在网络各处放置节点服务器所构成的在现有的互联网基础之上的一层智能虚拟网络，CDN系统能够实时地根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上。

## 基本过程
![网络](/img/network/36.png)

 1. 用户在浏览器中输入要访问的域名
 2. 浏览器向 DNS 服务器请求对域名进行解析。由于 CDN 对域名解析进行了调整，DNS 服务器会最终将域名的解析权交给 CNAME 指向的 CDN 专用 DNS 服务器。 
 3. CDN 的 DNS 服务器将 CDN 的负载均衡设备 IP 地址返回给用户。 
 4. 用户向 CDN 的负载均衡设备发起内容 URL 访问请求。 
 5. CDN 负载均衡设备会为用户选择一台合适的缓存服务器提供服务。 选择的依据包括：根据用户 IP 地址，判断哪一台服务器距离用户最近；根据用户所请求的 URL 中携带的内容名称，判断哪一台服务器上有用户所需内容；查询各个服务器的负载情况，判断哪一台服务器的负载较小。 
 基于以上这些依据的综合分析之后，负载均衡设置会把缓存服务器的 IP 地址返回给用户。 
 6. 用户向缓存服务器发出请求。 
 7. 缓存服务器响应用户请求，将用户所需内容传送到用户。 如果这台缓存服务器上并没有用户想要的内容，而负载均衡设备依然将它分配给了用户，那么这台服务器就要向它的上一级缓存服务器请求内容，直至追溯到网站的源服务器将内容拉取到本地。

## 参考文献
https://juejin.im/post/5d4a9bbc6fb9a06b0703a83b
https://www.jianshu.com/p/eb974c412399
https://cloud.tencent.com/developer/article/1438409
https://zhuanlan.zhihu.com/p/28940451