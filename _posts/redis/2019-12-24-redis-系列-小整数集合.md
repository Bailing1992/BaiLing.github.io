---
layout: post
title: "redis 系列 IntSet小整数集合"
subtitle: '开启 redis 探索新篇章'
author: "lichao"
header-img: "img/post-bg-rwd.jpg"
catalog: true
tags:
  - redis 
---



当 set 集合 容纳的元素 都是整数并且元素个数较小时，Redis 会使用 intset 来存储集合元素。intset 是紧凑的数组结构，同时支持 16 位、32 位和 64 位整数。

```
struct intset<T> {
int32 encoding; // 决定整数位宽是 16 位、32 位还是 64 位
int32 length; // 元素个数
int<T> contents; // 整数数组，可以是 16 位、32 位和 64 位
}
```

![存储概览](/img/redis/19.png)
