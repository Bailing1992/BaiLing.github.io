---
layout: post
title: "其他 系列 赛题"
author: "lichao"
header-img: "img/post-bg-rwd.jpg"
catalog: true
tags:
  - other
---
## 自适应服务限流
#### 背景
营销活动（例如海报、拼团）在足够集中的时间内（比如秒级）处理足够多的用户请求，让世界为此狂欢，同时也是彰显技术实力的一次大考。
#### 目标
自动评估系统的服务能力，使整个系统始终保持较好的性能，当请求数量超过服务能力时，允许拒绝部分请求，以保证服务不过载、宕机。

保证服务响应时间(RTT)在一定范围内，使系统吞吐量最高，保持高性能服务能力。

#### 服务健康度指标
更新状态，调节参数使变化感知更敏感，调整更到位。
机器级别：     
* CPU占用率
* IO占用率
* 内存占用率
JVM级别：     
* full gc 频次
接口级别：     
* 延迟
* 吞吐

#### 策略
限流，快速拒绝过载流量。

## 概念


#### 延迟
处理单次事件所需时间。
#### 吞吐
单位时间内程序可以处理的事件数。


## 缓存本地化方案     
访问热点数据，比如对某些热点商品的访问度非常高，即使是Redis缓存本身也有瓶颈问题，一旦请求量达到极限也会存在热点保护问题。这里提供一个通用的解决思路，就是在Cache的client端做本地Localcache，当发现热点数据时直接Cache在client里，而不要请求到Cache的Server。

> 微博团队披露：服务端本地缓存，使用nginx本身缓存和服务器的L0缓存，来提升模块的响应速度，做到了90%以上核心接口的响应时间在50ms以内，减少了进程等待时间，提升了服务器的处理速度。


#### 策略    
多级缓存，这里的缓存不仅仅是redis、或者memcached，而是local或者climatchent优先的思路，去除对并发资源的依赖。
在Redis缓存层之前加入本地缓存层:
1. 本地缓存的性能更高
2. 处理redis缓存失效的情况