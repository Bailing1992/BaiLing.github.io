---
layout: post
title: "MQ 系列 概述"
subtitle: '消息中间件基本特性'
author: "lichao"
header-img: "img/post-bg-rwd.jpg"
catalog: true
tags:
  - MQ
---
MQ 准确的名字是消息引擎系统。根据维基百科的定义，消息引擎系统是一组规范。企业利用这组规范在不同系统之间传递语义准确的消息，实现松耦合的异步式数据传递。

消息引擎系统的作用是“削峰填谷”，所谓的“削峰填谷”就是指缓冲上下游瞬时突发流量，使其更平滑。特别是对于那种发送能力很强的上游系统，如果没有消息引擎的保护，“脆弱”的下游系统可能会直接被压垮导致全链路服务“雪崩”。但是，一旦有了消息引擎，它能够有效地对抗上游的流量冲击，真正做到将上游的“峰”填满到“谷”中，避免了流量的震荡。消息引擎系统的另一大好处在于发送方和接收方的松耦合，这也在一定程度上简化了应用的开发，减少了系统间不必要的交互。

## 解耦
当调用方需要关心执行结果，通常使用 RPC 调用。但当调用方不关心执行结果，却仍然使用 RPC 调用，则会引发上下游极大的耦合与瓶颈。如果使用消息队列，只需要关心消息是否送达了队列，至于谁希望订阅，接下来收到消息如何处理，是下游的事情，这样就实现了异步通信和应用解耦，实现复杂逻辑的拆分。

## 流量消峰
在诸如秒杀、抢红包等大型活动时会带来很高的瞬时流量，如果没做相应的保护，往往导致下游存储压力过大，发生雪崩进而导致服务不可用，或者直接通过限流则会导致大量请求失败用户体验差。可以通过消息队列 MQ 来进行流量消峰，保护下游。